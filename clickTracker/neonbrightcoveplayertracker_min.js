var NeonTrackerType="flashonlyplayer";var PageLoadIDSeen=null;var MediaPlayPageIDSeen=null;var NeonDataSender=function(){function e(t){this.fullUrl=t;this.noCacheIE="&noCacheIE="+(new Date).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId="JscriptId"+e.scriptCounter++}e.scriptCounter=1;e.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("charset","utf-8");this.scriptObj.setAttribute("src",this.fullUrl+this.noCacheIE);this.scriptObj.setAttribute("id",this.scriptId)};e.prototype.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj)};e.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)};return{sendRequest:function(t,n){var r=document.URL.split("?")[0];var i=(new Date).getTime();var s=t+"?"+n+"&ts="+i+"&page="+encodeURIComponent(r)+"&ttype="+NeonTrackerType;try{bObj=new e(s);bObj.buildScriptTag();bObj.addScriptTag()}catch(o){}},_NeonPageRequestUUID:function(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return e()+e()+e()+e()}}}();var reqGuid=NeonDataSender._NeonPageRequestUUID();var NeonPlayerTracker=function(){var e,t,n,r,i;var s="http://tracker.neon-lab.com/track";return{onTemplateLoad:function(e){NeonPlayerTracker.hookNeonTrackerToFlashPlayer(e)},hookNeonTrackerToFlashPlayer:function(i){e=brightcove.api.getExperience(i);if(e){NeonTrackerType="html5"}else{e=bcPlayer.getPlayer(i);t=e.getModule(APIModules.VIDEO_PLAYER);n=e.getModule(APIModules.CONTENT);r=e.getModule(APIModules.EXPERIENCE);t.addEventListener(BCMediaEvent.BEGIN,NeonPlayerTracker.onMediaBegin);r.addEventListener(BCExperienceEvent.CONTENT_LOAD,NeonPlayerTracker.trackLoadedImageUrls)}},onTemplateReady:function(r){if(r.target.experience){APIModules=brightcove.api.modules.APIModules;t=e.getModule(APIModules.VIDEO_PLAYER);n=e.getModule(APIModules.CONTENT);t.addEventListener(brightcove.api.events.MediaEvent.BEGIN,NeonPlayerTracker.smartPlayerMediaBegin);t.getCurrentVideo(function(e){i=e})}else{i=t.getCurrentVideo();NeonPlayerTracker.trackLoadedImageUrls()}},trackLoadedImageUrls:function(){var e=new Array;var t=new Array;var r=n.getAllMediaCollections();if(r.length>0&&r[0].mediaCount>0){for(var o=0;o<r[0].mediaCount;o++){e[o]=n.getMedia(r[0].mediaIds[o])["thumbnailURL"].split("?")[0]}}action="load";params="a="+action+"&id="+reqGuid+"&imgs="+encodeURIComponent(JSON.stringify(e))+"&cvid="+i.id;if(PageLoadIDSeen==null){PageLoadIDSeen=reqGuid;NeonDataSender.sendRequest(s,params)}},onMediaBegin:function(e){var t=e.media.id;var n="click";var r=e.media.thumbnailURL.split("?")[0];params="a="+n+"&id="+reqGuid+"&img="+encodeURIComponent(r);if(MediaPlayPageIDSeen==null){MediaPlayPageIDSeen=reqGuid;NeonDataSender.sendRequest(s,params)}},smartPlayerMediaBegin:function(e){t.getCurrentVideo(function(e){var t=new Array;t[0]=e.thumbnailURL.split("?")[0];action="load";params="a="+action+"&id="+reqGuid+"&imgs="+encodeURIComponent(JSON.stringify(t))+"&cvid="+i.id;NeonDataSender.sendRequest(s,params);action="click";imgSrc=e.thumbnailURL.split("?")[0];params="a="+action+"&id="+reqGuid+"&img="+encodeURIComponent(imgSrc);NeonDataSender.sendRequest(s,params)})}}}()
