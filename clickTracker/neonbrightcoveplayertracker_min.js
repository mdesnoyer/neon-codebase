var NeonTrackerType="flashonlyplayer",PageLoadIDSeen=null,MediaPlayPageIDSeen=null,NeonDataSender=function(){function b(a){this.fullUrl=a;this.noCacheIE="&noCacheIE="+(new Date).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId="JscriptId"+b.scriptCounter++}b.scriptCounter=1;b.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("charset","utf-8");this.scriptObj.setAttribute("src",
this.fullUrl+this.noCacheIE);this.scriptObj.setAttribute("id",this.scriptId)};b.prototype.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj)};b.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)};return{sendRequest:function(a,d){var e=document.URL.split("?")[0],f=(new Date).getTime(),e=a+"?"+d+"&ts="+f+"&page="+encodeURIComponent(e)+"&ttype="+NeonTrackerType;try{bObj=new b(e),bObj.buildScriptTag(),bObj.addScriptTag()}catch(c){}},_NeonPageRequestUUID:function(){function a(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return a()+a()+a()+a()}}}(),reqGuid=NeonDataSender._NeonPageRequestUUID(),NeonPlayerTracker=function(){var b,a,d,e,f;return{onTemplateLoad:function(c){NeonPlayerTracker.hookNeonTrackerToFlashPlayer(c)},setAccountId:function(c){NeonPlayerTracker.TrackerAccountId=c},hookNeonTrackerToFlashPlayer:function(c){(b=brightcove.api.getExperience(c))?NeonTrackerType="html5":(b=bcPlayer.getPlayer(c),a=b.getModule(APIModules.VIDEO_PLAYER),d=b.getModule(APIModules.CONTENT),
e=b.getModule(APIModules.EXPERIENCE),a.addEventListener(BCMediaEvent.BEGIN,NeonPlayerTracker.onMediaBegin),e.addEventListener(BCExperienceEvent.CONTENT_LOAD,NeonPlayerTracker.trackLoadedImageUrls))},onTemplateReady:function(c){c.target.experience?(APIModules=brightcove.api.modules.APIModules,a=b.getModule(APIModules.VIDEO_PLAYER),d=b.getModule(APIModules.CONTENT),a.addEventListener(brightcove.api.events.MediaEvent.BEGIN,NeonPlayerTracker.smartPlayerMediaBegin),a.getCurrentVideo(function(c){f=c})):
(f=a.getCurrentVideo(),NeonPlayerTracker.trackLoadedImageUrls())},trackLoadedImageUrls:function(){var c=[],a=d.getAllMediaCollections();if(0<a.length&&0<a[0].mediaCount)for(var b=0;b<a[0].mediaCount;b++)c[b]=d.getMedia(a[0].mediaIds[b]).thumbnailURL.split("?")[0];action="load";params="a="+action+"&id="+reqGuid+"&imgs="+encodeURIComponent(JSON.stringify(c))+"&cvid="+f.id+"&tai="+NeonPlayerTracker.TrackerAccountId;null==PageLoadIDSeen&&(PageLoadIDSeen=reqGuid,NeonDataSender.sendRequest("http://tracker.neon-lab.com/track",
params))},onMediaBegin:function(a){a=a.media.thumbnailURL.split("?")[0];params="a=click&id="+reqGuid+"&img="+encodeURIComponent(a)+"&tai="+NeonPlayerTracker.TrackerAccountId;null==MediaPlayPageIDSeen&&(MediaPlayPageIDSeen=reqGuid,NeonDataSender.sendRequest("http://tracker.neon-lab.com/track",params))},smartPlayerMediaBegin:function(b){a.getCurrentVideo(function(a){var b=[];b[0]=a.thumbnailURL.split("?")[0];action="load";params="a="+action+"&id="+reqGuid+"&imgs="+encodeURIComponent(JSON.stringify(b))+
"&cvid="+f.id+"&tai="+NeonPlayerTracker.TrackerAccountId;NeonDataSender.sendRequest("http://tracker.neon-lab.com/track",params);action="click";imgSrc=a.thumbnailURL.split("?")[0];params="a="+action+"&id="+reqGuid+"&img="+encodeURIComponent(imgSrc)+"&tai="+NeonPlayerTracker.TrackerAccountId;NeonDataSender.sendRequest("http://tracker.neon-lab.com/track",params)})}}}();
